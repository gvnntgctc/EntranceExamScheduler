<!DOCTYPE html>
<html>
<head>
  <title>Login / Register - Exam Scheduler</title>
  <link href="https://fonts.googleapis.com/css2?family=Roboto:wght@400;500;700&display=swap" rel="stylesheet">
  <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.0.0/css/all.min.css">
  <link rel="stylesheet" href="/css/auth.css">
</head>
<body>
  
  <div class="container" id="container">
    
    <!-- LOGIN FORM -->
    <div class="form-container sign-in-container">
      <form action="/auth/login" method="POST">
        <h1>Welcome Back!</h1>
        <p class="subtitle">Login to access your exam schedule</p>
        
        <% if (typeof error !== 'undefined' && error.length > 0 && formType === 'login') { %>
          <div class="message error">
            <i class="fas fa-exclamation-circle"></i> <%= error %>
          </div>
        <% } %>
        
        <% if (typeof success !== 'undefined' && success.length > 0) { %>
          <div class="message success">
            <i class="fas fa-check-circle"></i> <%= success %>
          </div>
        <% } %>
        
        <div class="input-group">
          <i class="fas fa-envelope"></i>
          <input type="email" name="email" placeholder="Email" required />
        </div>
        
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" name="password" placeholder="Password" required />
        </div>
        
        <button class="btn-submit" type="submit">
          <i class="fas fa-sign-in-alt"></i> Login
        </button>
        
        <p class="toggle-text">
          Don't have an account? <a href="#" onclick="toggleForm()">Register</a>
        </p>
      </form>
    </div>
    
    <!-- REGISTER FORM -->
    <div class="form-container sign-up-container">
      <form action="/auth/register" method="POST">
        <h1>Create Account</h1>
        <p class="subtitle">Register to view your exam schedule</p>
        
        <% if (typeof error !== 'undefined' && error.length > 0 && formType === 'register') { %>
          <div class="message error">
            <i class="fas fa-exclamation-circle"></i> <%= error %>
          </div>
        <% } %>
        
        <div class="input-group">
          <i class="fas fa-envelope"></i>
          <input type="email" name="email" placeholder="Email" required />
        </div>
        
        <div class="input-group">
          <i class="fas fa-user"></i>
          <input type="text" name="fullName" placeholder="Student Full Name" required />
        </div>
        
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" name="password" placeholder="Password" required />
        </div>
        
        <div class="input-group">
          <i class="fas fa-lock"></i>
          <input type="password" name="confirmPassword" placeholder="Confirm Password" required />
        </div>
        
        <button class="btn-submit" type="submit">
          <i class="fas fa-user-plus"></i> Register
        </button>
        
        <p class="toggle-text">
          Already have an account? <a href="#" onclick="toggleForm()">Login</a>
        </p>
      </form>
    </div>
    
    <!-- OVERLAY PANELS -->
    <div class="overlay-container">
      <div class="overlay">
        
        <!-- Left Panel (Shows when Register is active) -->
        <div class="overlay-panel overlay-left">
          <div class="logo">
            <img src="/images/logo.png" alt="School Logo" />
          </div>
          <h1>Welcome!</h1>
          <p>Already have an account? Login to access your exam schedule</p>
          <button type="button" class="btn-ghost" onclick="toggleForm()">
            <i class="fas fa-sign-in-alt"></i> Login
          </button>
        </div>
        
        <!-- Right Panel (Shows when Login is active) -->
        <div class="overlay-panel overlay-right">
          <div class="logo">
            <img src="/images/logo.png" alt="School Logo" />
          </div>
          <h1>Hello, Student!</h1>
          <p>Don't have an account? Register now to view your exam schedule</p>
          <button type="button" class="btn-ghost" onclick="toggleForm()">
            <i class="fas fa-user-plus"></i> Register
          </button>
        </div>
        
      </div>
    </div>
    
  </div>

  <script>
    const container = document.getElementById('container');
    
    const urlParams = new URLSearchParams(window.location.search);
    const isRegister = urlParams.get('register') === 'true' || '<%= formType %>' === 'register';
    
    if (isRegister) {
      container.classList.add("right-panel-active");
    }

    function toggleForm() {
      container.classList.toggle("right-panel-active");
      const isActive = container.classList.contains("right-panel-active");
      const newUrl = isActive ? '/auth/login?register=true' : '/auth/login';
      history.replaceState(null, '', newUrl);
    }
  </script>
</body>
</html>